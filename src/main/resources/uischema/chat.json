{
  "connectorName": "ai",
  "operationName": "chat",
  "title": "Chat Completion",
  "help": "Generate a chat completion using a large language model (LLM).",
  "elements": [
    {
      "type": "attributeGroup",
      "value": {
        "groupName": "General",
        "elements": [
          {
            "type": "attribute",
            "value": {
              "name": "llmConfigKey",
              "displayName": "LLM Connection",
              "inputType": "connection",
              "allowedConnectionTypes": [
                "OPEN_AI",
                "ANTHROPIC",
                "AZURE_OPEN_AI",
                "MISTRAL_AI",
                "DEEPSEEK"
              ],
              "defaultType": "connection.local",
              "defaultValue": "",
              "required": "true",
              "helpTip": "Select the LLM service connection to be used for processing requests."
            }
          },
          {
            "type": "attribute",
            "value": {
              "name": "memoryConfigKey",
              "displayName": "Memory Connection",
              "inputType": "connection",
              "allowedConnectionTypes": [
                "IN_MEMORY",
                "POSTGRES_MEMORY"
              ],
              "defaultType": "connection.local",
              "defaultValue": "",
              "required": "true",
              "helpTip": "Choose the memory connection to store and retrieve chat history."
            }
          },
          {
            "type": "attributeGroup",
            "value": {
              "groupName": "Basic",
              "elements": [
                {
                  "type": "attribute",
                  "value": {
                    "name": "modelName",
                    "displayName": "Model name",
                    "inputType": "stringOrExpression",
                    "defaultValue": "gpt-4o",
                    "required": "true",
                    "helpTip": "Specify the name of the model to use for generating responses."
                  }
                },
                {
                  "type": "attribute",
                  "value": {
                    "name": "userID",
                    "displayName": "User ID",
                    "inputType": "stringOrExpression",
                    "placeholder": "payload.userID",
                    "required": "true",
                    "helpTip": "Provide a unique identifier for the user initiating the request."
                  }
                },
                {
                  "type": "attribute",
                  "value": {
                    "name": "prompt",
                    "displayName": "User query/prompt",
                    "inputType": "expressionTextArea",
                    "defaultValue": "",
                    "required": "true",
                    "helpTip": "Enter the query or prompt to send to the LLM for processing."
                  }
                },
                {
                  "type": "attribute",
                  "value": {
                    "name": "attachments",
                    "displayName": "Attachments",
                    "inputType": "expressionTextArea",
                    "placeholder": "[{\"type\":\"application/pdf\", \"content\":\"base64 content\"}]",
                    "required": "false",
                    "helpTip": "Attach additional data or context to enhance the LLM's response. The attachments should be in the format [{\"type\":\"application/pdf\", \"content\":\"base64 content\"}] or {\"type\":\"application/pdf\", \"content\":\"base64 content\"}. The supported types are: application/pdf, image/png, image/jpeg, text/plain, text/html, text/csv, text/xml. The content should be base64 encoded."
                  }
                },
                {
                  "type": "attribute",
                  "value": {
                    "name": "outputType",
                    "displayName": "Output type",
                    "inputType": "combo",
                    "comboValues": [
                      "string",
                      "integer",
                      "float",
                      "boolean"
                    ],
                    "defaultValue": "string",
                    "required": "true",
                    "helpTip": "Select the data type for the output generated by the LLM."
                  }
                }
              ]
            }
          },
          {
            "type": "attributeGroup",
            "value": {
              "groupName": "Advanced",
              "elements": [
                {
                  "type": "attribute",
                  "value": {
                    "name": "maxHistory",
                    "displayName": "Max chat history",
                    "inputType": "string",
                    "defaultValue": "10",
                    "required": "false",
                    "helpTip": "Set the maximum number of previous messages to include in the context."
                  }
                },
                {
                  "type": "attribute",
                  "value": {
                    "name": "system",
                    "displayName": "System prompt",
                    "inputType": "textAreaOrExpression",
                    "required": "false",
                    "helpTip": "Provide instructions or guidelines for the LLM to follow during the conversation."
                  }
                },
                {
                  "type": "attribute",
                  "value": {
                    "name": "maxTokens",
                    "displayName": "Max tokens",
                    "inputType": "string",
                    "defaultValue": "4069",
                    "required": "false",
                    "helpTip": "Define the maximum number of tokens the LLM can generate in the response."
                  }
                },
                {
                  "type": "attribute",
                  "value": {
                    "name": "temperature",
                    "displayName": "Temperature",
                    "inputType": "string",
                    "defaultValue": "0.7",
                    "required": "false",
                    "helpTip": "Adjust the randomness of the response: lower values produce more deterministic results."
                  }
                },
                {
                  "type": "attribute",
                  "value": {
                    "name": "topP",
                    "displayName": "Top P",
                    "inputType": "string",
                    "defaultValue": "1",
                    "required": "false",
                    "helpTip": "Control the diversity of the response: lower values result in more focused outputs."
                  }
                },
                {
                  "type": "attribute",
                  "value": {
                    "name": "frequencyPenalty",
                    "displayName": "Frequency penalty",
                    "inputType": "string",
                    "defaultValue": "0",
                    "required": "false",
                    "helpTip": "Reduce repetition in the response: higher values discourage repeated phrases."
                  }
                },
                {
                  "type": "attribute",
                  "value": {
                    "name": "seed",
                    "displayName": "Seed",
                    "inputType": "string",
                    "defaultValue": "",
                    "required": "false",
                    "helpTip": "Set a seed value for deterministic outputs when randomness is involved."
                  }
                }
              ]
            }
          },
          {
            "type": "attributeGroup",
            "value": {
              "groupName": "Output",
              "elements": [
                {
                  "type": "attribute",
                  "value": {
                    "name": "responseVariable",
                    "displayName": "Output Variable Name",
                    "inputType": "string",
                    "deriveResponseVariable": true,
                    "required": "true",
                    "helpTip": "Name of the variable to which the output of the operation should be assigned"
                  }
                },
                {
                  "type": "attribute",
                  "value": {
                    "name": "overwriteBody",
                    "displayName": "Overwrite Message Body",
                    "inputType": "checkbox",
                    "defaultValue": "false",
                    "helpTip": "Replace the Message Body in Message Context with the output of the operation (This will remove the payload from the above variable).",
                    "required": "false"
                  }
                }
              ]
            }
          }
        ]
      }
    }
  ]
}
